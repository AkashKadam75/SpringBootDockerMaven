pipeline {
    agent any
    
    stages{
        
        stage('Compile Stage') {
                           
                           steps {
                               
                               withMaven(maven : 'MAVEN_3_5') {
                             		sh 'sudo mvn clean install'    
                               }

                           }

       	}
       	
       	stage('Testing Stage') {
                           
                           steps {
                               
                               withMaven(maven : 'MAVEN_3_5') {
                             		sh 'sudo mvn clean test'    
                               }

                           }

       	}
       	
       	stage('Build Stage') {
                           
                           steps {
                               
                               withMaven(maven : 'MAVEN_3_5') {
                             		sh 'sudo mvn docker:build' 
					sh	'sudo docker login'
                             		sh	'sudo docker tag demoboot dockerakash/demoboot'
									sh	'sudo docker push dockerakash/demoboot'
									sh	'sudo docker rmi demoboot dockerakash/demoboot'    
                               }

                           }

       	}

    }

}
